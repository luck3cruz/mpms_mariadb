<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="rescate" language="groovy" pageWidth="612" pageHeight="792" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="DATE" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="AMOUNT_DIVISION" class="java.lang.Double">
		<defaultValueExpression><![CDATA[10000.00]]></defaultValueExpression>
	</parameter>
	<parameter name="BRACKET1" class="java.lang.Double">
		<defaultValueExpression><![CDATA[100.00]]></defaultValueExpression>
	</parameter>
	<parameter name="BRACKET2" class="java.lang.Double">
		<defaultValueExpression><![CDATA[1000.00]]></defaultValueExpression>
	</parameter>
	<parameter name="BRACKET3" class="java.lang.Double">
		<defaultValueExpression><![CDATA[5000.00]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT case
	when principal > $P{AMOUNT_DIVISION} then 'big'
	else 'small'
	END AS amount_grp, a.pap_num, b.date, a.client_name, b.principal, b.interest from merlininventorydatabase.client_info a inner join merlininventorydatabase.rescate b on a.item_code_a = b.pap_num where date = $P{DATE} and subasta = 0
order by amount_grp, b.pap_num]]>
	</queryString>
	<field name="amount_grp" class="java.lang.String"/>
	<field name="pap_num" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="date" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="client_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="principal" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="interest" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="TOTAL" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{principal}]]></variableExpression>
		<initialValueExpression><![CDATA[0.00]]></initialValueExpression>
	</variable>
	<variable name="SUBTOTAL" class="java.lang.Double">
		<variableExpression><![CDATA[$F{principal}+$F{interest}]]></variableExpression>
	</variable>
	<group name="AMOUNT_GROUP">
		<groupExpression><![CDATA[$F{amount_grp}]]></groupExpression>
		<groupHeader>
			<band height="57">
				<staticText>
					<reportElement mode="Transparent" x="201" y="21" width="222" height="36" backcolor="#FFFFFF">
						<printWhenExpression><![CDATA[$F{amount_grp}.equalsIgnoreCase("big")]]></printWhenExpression>
					</reportElement>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Roboto Condensed" size="10" isBold="true"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<text><![CDATA[CAPITAL]]></text>
				</staticText>
				<textField>
					<reportElement x="0" y="0" width="572" height="19"/>
					<box>
						<bottomPen lineWidth="0.75" lineStyle="Dashed"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Roboto Condensed" size="8"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{amount_grp}.equalsIgnoreCase("big") ?
new StringBuilder("LOANS WITH CAPITAL AMOUNTING TO " + new DecimalFormat("#,##0.00").format($P{AMOUNT_DIVISION}+1) + " AND UP")
: new StringBuilder("LOANS WITH CAPITAL AMOUNTING BELOW " + new DecimalFormat("#,##0.00").format($P{AMOUNT_DIVISION}))]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement mode="Transparent" x="47" y="21" width="154" height="36" backcolor="#FFFFFF"/>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Roboto Condensed" size="10" isBold="true"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<text><![CDATA[NAME OF PAWNER]]></text>
				</staticText>
				<staticText>
					<reportElement x="0" y="21" width="47" height="36"/>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Roboto Condensed" isBold="true"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<text><![CDATA[PAP. NO.]]></text>
				</staticText>
				<staticText>
					<reportElement x="423" y="21" width="74" height="36"/>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Roboto Condensed" isBold="true"/>
					</textElement>
					<text><![CDATA[INTEREST]]></text>
				</staticText>
				<staticText>
					<reportElement x="497" y="21" width="75" height="36"/>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Roboto Condensed" isBold="true"/>
					</textElement>
					<text><![CDATA[TOTAL]]></text>
				</staticText>
				<staticText>
					<reportElement mode="Transparent" x="201" y="21" width="222" height="18" backcolor="#FFFFFF">
						<printWhenExpression><![CDATA[$F{amount_grp}.equalsIgnoreCase("small")]]></printWhenExpression>
					</reportElement>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Roboto Condensed" size="10" isBold="true"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<text><![CDATA[CAPITAL]]></text>
				</staticText>
				<textField>
					<reportElement x="201" y="39" width="74" height="18">
						<printWhenExpression><![CDATA[$F{amount_grp}.equalsIgnoreCase("small")]]></printWhenExpression>
					</reportElement>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Roboto Condensed" size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[new StringBuilder(new DecimalFormat("#,##0").format($P{BRACKET3}+1) + "-UP" )]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="275" y="39" width="74" height="18">
						<printWhenExpression><![CDATA[$F{amount_grp}.equalsIgnoreCase("small")]]></printWhenExpression>
					</reportElement>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Roboto Condensed" size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[new StringBuilder(new DecimalFormat("#,##0").format($P{BRACKET2}+1) + "-" + new DecimalFormat("#,##0").format($P{BRACKET3}))]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="349" y="39" width="74" height="18">
						<printWhenExpression><![CDATA[$F{amount_grp}.equalsIgnoreCase("small")]]></printWhenExpression>
					</reportElement>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Roboto Condensed" size="9" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[new StringBuilder(new DecimalFormat("#,##0").format($P{BRACKET1}) + "-" + new DecimalFormat("#,##0").format($P{BRACKET2}))]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="17">
				<staticText>
					<reportElement x="0" y="2" width="572" height="15"/>
					<box>
						<pen lineStyle="Dashed"/>
						<topPen lineWidth="0.25" lineStyle="Dashed"/>
						<leftPen lineStyle="Dashed"/>
						<bottomPen lineStyle="Dashed"/>
						<rightPen lineStyle="Dashed"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Roboto Condensed" size="8"/>
					</textElement>
					<text><![CDATA[C   U   T            A   B   O   V   E            T   H   I   S            L   I   N   E]]></text>
				</staticText>
			</band>
		</groupFooter>
	</group>
	<group name="DATE_GROUP">
		<groupExpression><![CDATA[$F{date}]]></groupExpression>
		<groupHeader>
			<band height="18">
				<textField pattern="dd MMMMM yyyy">
					<reportElement mode="Opaque" x="1" y="0" width="200" height="18" forecolor="#333333" backcolor="#CCCCCC"/>
					<box>
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.25"/>
						<leftPen lineWidth="0.25"/>
						<bottomPen lineWidth="0.25"/>
						<rightPen lineWidth="0.25"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Roboto Condensed" size="10" isBold="true"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[new SimpleDateFormat("MMMMMMMMM dd, yyyy     EEEEEEEEE").format($F{date}).toUpperCase()]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<background>
		<band/>
	</background>
	<title>
		<band height="18">
			<image onErrorType="Blank">
				<reportElement x="1" y="0" width="32" height="18" isRemoveLineWhenBlank="true"/>
				<imageExpression><![CDATA["D:\\merlin logo.png"]]></imageExpression>
			</image>
			<staticText>
				<reportElement x="21" y="0" width="180" height="18"/>
				<textElement verticalAlignment="Bottom">
					<font fontName="Roboto Condensed" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[LOANS PAID (RESCATE) REPORT]]></text>
			</staticText>
		</band>
	</title>
	<detail>
		<band height="18">
			<textField pattern="#,##0.00">
				<reportElement x="201" y="0" width="222" height="18"/>
				<box rightPadding="4">
					<pen lineWidth="0.25" lineStyle="Double"/>
					<topPen lineWidth="0.25" lineStyle="Double"/>
					<leftPen lineWidth="0.25" lineStyle="Double"/>
					<bottomPen lineWidth="0.25" lineStyle="Double"/>
					<rightPen lineWidth="0.25" lineStyle="Double"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Roboto Condensed" size="9"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{amount_grp}.equalsIgnoreCase("big") ? new DecimalFormat("#,##0.00").format($F{principal}) : " "]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="47" y="0" width="154" height="18"/>
				<box leftPadding="4">
					<pen lineWidth="0.25" lineStyle="Double"/>
					<topPen lineWidth="0.25" lineStyle="Double"/>
					<leftPen lineWidth="0.25" lineStyle="Double"/>
					<bottomPen lineWidth="0.25" lineStyle="Double"/>
					<rightPen lineWidth="0.25" lineStyle="Double"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="Roboto Condensed" size="9"/>
					<paragraph lineSpacing="Single" leftIndent="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{client_name}.toUpperCase()]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="275" y="0" width="74" height="18">
					<printWhenExpression><![CDATA[$F{amount_grp}.equalsIgnoreCase("small")]]></printWhenExpression>
				</reportElement>
				<box rightPadding="0">
					<pen lineWidth="0.25" lineStyle="Double"/>
					<topPen lineWidth="0.25" lineStyle="Double"/>
					<leftPen lineWidth="0.25" lineStyle="Double"/>
					<bottomPen lineWidth="0.25" lineStyle="Double"/>
					<rightPen lineWidth="0.25" lineStyle="Double"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Roboto Condensed" size="9"/>
					<paragraph lineSpacing="Single" rightIndent="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{principal} > ($P{BRACKET2}+1) && $F{principal} <= $P{BRACKET3} && $F{amount_grp}.equalsIgnoreCase("small") ? new DecimalFormat("#,##0.00").format($F{principal}): " "]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="0" width="47" height="18"/>
				<box>
					<pen lineWidth="0.25" lineStyle="Double"/>
					<topPen lineWidth="0.25" lineStyle="Double"/>
					<leftPen lineWidth="0.25" lineStyle="Double"/>
					<bottomPen lineWidth="0.25" lineStyle="Double"/>
					<rightPen lineWidth="0.25" lineStyle="Double"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Roboto Condensed" size="9"/>
					<paragraph lineSpacing="Single"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{pap_num}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="423" y="0" width="74" height="18"/>
				<box rightPadding="0">
					<pen lineWidth="0.25" lineStyle="Double"/>
					<topPen lineWidth="0.25" lineStyle="Double"/>
					<leftPen lineWidth="0.25" lineStyle="Double"/>
					<bottomPen lineWidth="0.25" lineStyle="Double"/>
					<rightPen lineWidth="0.25" lineStyle="Double"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Roboto Condensed" size="9"/>
					<paragraph rightIndent="10"/>
				</textElement>
				<textFieldExpression><![CDATA[new DecimalFormat("#,##0.00").format($F{interest})]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="497" y="0" width="75" height="18"/>
				<box rightPadding="0">
					<pen lineWidth="0.25" lineStyle="Double"/>
					<topPen lineWidth="0.25" lineStyle="Double"/>
					<leftPen lineWidth="0.25" lineStyle="Double"/>
					<bottomPen lineWidth="0.25" lineStyle="Double"/>
					<rightPen lineWidth="0.25" lineStyle="Double"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Roboto Condensed" size="9"/>
					<paragraph rightIndent="10"/>
				</textElement>
				<textFieldExpression><![CDATA[new DecimalFormat("#,##0.00").format($V{SUBTOTAL})]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="201" y="0" width="74" height="18">
					<printWhenExpression><![CDATA[$F{amount_grp}.equalsIgnoreCase("small")]]></printWhenExpression>
				</reportElement>
				<box rightPadding="0">
					<pen lineWidth="0.25" lineStyle="Double"/>
					<topPen lineWidth="0.25" lineStyle="Double"/>
					<leftPen lineWidth="0.25" lineStyle="Double"/>
					<bottomPen lineWidth="0.25" lineStyle="Double"/>
					<rightPen lineWidth="0.25" lineStyle="Double"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Roboto Condensed" size="9"/>
					<paragraph lineSpacing="Single" rightIndent="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{principal} > ($P{BRACKET3}+1) && $F{principal} <= $P{AMOUNT_DIVISION} && $F{amount_grp}.equalsIgnoreCase("small") ? new DecimalFormat("#,##0.00").format($F{principal}): " "]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00">
				<reportElement x="349" y="0" width="74" height="18">
					<printWhenExpression><![CDATA[$F{amount_grp}.equalsIgnoreCase("small")]]></printWhenExpression>
				</reportElement>
				<box rightPadding="0">
					<pen lineWidth="0.25" lineStyle="Double"/>
					<topPen lineWidth="0.25" lineStyle="Double"/>
					<leftPen lineWidth="0.25" lineStyle="Double"/>
					<bottomPen lineWidth="0.25" lineStyle="Double"/>
					<rightPen lineWidth="0.25" lineStyle="Double"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="Roboto Condensed" size="9"/>
					<paragraph lineSpacing="Single" rightIndent="5"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{principal} >= $P{BRACKET1} && $F{principal} <= $P{BRACKET2} && $F{amount_grp}.equalsIgnoreCase("small")
? new DecimalFormat("#,##0.00").format($F{principal}) : " "]]></textFieldExpression>
			</textField>
		</band>
	</detail>
</jasperReport>
